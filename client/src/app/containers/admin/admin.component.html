<div class="page-main-container admin-main-container">
	<div class="dashboard d-flex justify-content-center">
		<app-admin-info-card
			[icon]="'bi bi-people-fill'"
			[title]="'Utenti'"
			[value]="users.length"
		></app-admin-info-card>

		<app-admin-info-card
			[icon]="'bi bi-share-fill'"
			[title]="'Link attivi'"
		></app-admin-info-card>

		<app-admin-info-card
			[icon]="'bi bi-book-fill'"
			[title]="'Libri'"
			[value]="books.length"
		></app-admin-info-card>
	</div>

	<div class="sections d-flex">
		<div class="user-section d-flex">
			<div class="users-list">
				<div
					class="user"
					[class.active]="user._id == selectedUser?._id"
					*ngFor="let user of users"
					(click)="selectUser(user)"
				>
					<div>
						<div>{{ user.name }} {{ user.surname }}</div>

						<div>
							{{ user.email }}
						</div>
					</div>
				</div>
			</div>

			<div class="actions d-flex flex-column">
				<div
					*ngIf="mode == modeEnum.READ"
					class="options d-flex flex-row"
				>
					<button
						class="btn btn-new btn-secondary create"
						(click)="createUser()"
					>
						Crea
					</button>

					<button class="btn btn-new btn-secondary edit">
						Modifica
					</button>

					<i class="bi bi-trash3 pointer delete" title="Elimina"></i>
				</div>

				<div
					*ngIf="mode != modeEnum.READ"
					class="options d-flex flex-row justify-content-between"
				>
					<button
						class="btn btn-new btn-secondary save"
						(click)="saveUser()"
					>
						Salva
					</button>

					<button
						class="btn btn-new btn-secondary cancel"
						(click)="cancel()"
					>
						Annulla
					</button>
				</div>

				<div
					*ngIf="selectedUser"
					class="d-flex flex-column fields-container"
				>
					<div>
						<label>Nome</label>
						<input
							type="text"
							class="form-control"
							[(ngModel)]="selectedUser.name"
						/>
					</div>

					<div>
						<label>Cognome</label>
						<input
							type="text"
							class="form-control"
							[(ngModel)]="selectedUser.surname"
						/>
					</div>

					<div>
						<label>Email</label>
						<input
							type="text"
							class="form-control"
							[(ngModel)]="selectedUser.email"
						/>
					</div>

					<div
						*ngIf="
							mode == modeEnum.NEW && isOnNewUser(selectedUser)
						"
					>
						<label>Password</label>
						<input
							type="text"
							class="form-control"
							[(ngModel)]="selectedUser.password"
						/>
					</div>
				</div>
			</div>
		</div>

		<div class="links-section">a</div>
	</div>
</div>
