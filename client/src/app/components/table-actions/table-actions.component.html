<div class="actions-main-container d-flex">
	<ng-container *ngIf="currentMode == userModeEnum.READ">
		<div class="d-flex gap-2 container-read">
			<div
				[formGroup]="searchFormGroup"
				class="search d-flex flex-row gap-1"
			>
				<input
					formControlName="search"
					type="text"
					placeholder="Cerca..."
				/>

				<i
					class="bi bi-x-lg"
					*ngIf="onSearch"
					(click)="restoreSearch()"
				></i>
				<i class="bi bi-search" *ngIf="!onSearch"></i>
			</div>

			<button
				*ngIf="!userLogged"
				class="btn btn-booking btn-secondary"
				data-bs-toggle="modal"
				data-bs-target="#bookingModal"
			>
				Prenota
			</button>

			<div class="action-buttons-container" *ngIf="userLogged">
				<button
					class="btn btn-new btn-secondary"
					(click)="setMode(userModeEnum.NEW)"
				>
					Crea
				</button>

				<button
					class="btn btn-edit btn-secondary"
					(click)="setMode(userModeEnum.EDIT)"
				>
					Modifica
				</button>

				<button
					class="btn btn-export btn-secondary"
					(click)="execAction(actionEnum.EXPORT)"
				>
					Esporta
				</button>
			</div>
		</div>
	</ng-container>

	<!-- Modal -->
	<div
		class="modal fade"
		id="bookingModal"
		tabindex="-1"
		aria-labelledby="bookingModelLabel"
		aria-hidden="true"
	>
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="bookingModelLabel">
						Prenotazione libro
					</h5>
					<button
						type="button"
						class="btn-close"
						data-bs-dismiss="modal"
						aria-label="Close"
					></button>
				</div>
				<div class="modal-body">
					<div class="book-info">
						<div class="book-field d-flex flex-row">
							<div class="field-title">Libro:</div>
							<div class="field-value">
								{{ selectedBook?.title }}
							</div>
						</div>
						<div class="book-field d-flex flex-row">
							<div class="field-title">Argomento:</div>
							<div class="field-value">
								{{ selectedBook?.topic }}
							</div>
						</div>
						<div class="book-field d-flex flex-row">
							<div class="field-title">Anno:</div>
							<div class="field-value">
								{{ selectedBook?.year }}
							</div>
						</div>
						<div class="book-field d-flex flex-row">
							<div class="field-title">Totale richiedenti:</div>
							<div class="field-value">
								{{ selectedBook?.requestor?.length }}
							</div>
						</div>
					</div>

					<hr />

					<div class="requestor-info d-flex flex-column">
						<label class="field-title">Nome richiedente</label>
						<input
							type="text"
							class="form-control"
							[(ngModel)]="possibleRequestor"
						/>
					</div>
				</div>
				<div class="modal-footer">
					<button
						type="button"
						class="btn btn-secondary cancel"
						data-bs-dismiss="modal"
					>
						Anulla
					</button>
					<button
						type="button"
						class="btn btn-primary booking"
						data-bs-dismiss="modal"
						(click)="bookBooking()"
					>
						Prenota
					</button>
				</div>
			</div>
		</div>
	</div>
</div>
